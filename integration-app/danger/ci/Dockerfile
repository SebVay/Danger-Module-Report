FROM ghcr.io/danger/danger-kotlin:1.3.3

ARG BITRISE_IO
ARG BITRISEIO_GIT_REPOSITORY_OWNER
ARG BITRISEIO_GIT_REPOSITORY_SLUG
ARG BITRISE_PULL_REQUEST
ARG BITRISE_BUILD_URL
ARG BITRISE_GIT_COMMIT
ARG DANGER_GITHUB_API_TOKEN
ARG BITRISE_PUBLIC_INSTALL_PAGE_URL

WORKDIR /code
COPY . /code

RUN git fetch

WORKDIR /code/config/danger

RUN danger-kotlin ci
